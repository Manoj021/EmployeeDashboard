{"ast":null,"code":"import Matrix from '../geometry/matrix';\nvar matrixRegexp = /matrix\\((.*)\\)/;\n\nfunction parseMatrix(matrixString) {\n  var match = matrixString.match(matrixRegexp);\n\n  if (match === null || match.length !== 2) {\n    return Matrix.unit();\n  }\n\n  var members = match[1].split(',').map(function (x) {\n    return parseFloat(x);\n  });\n  return new (Function.prototype.bind.apply(Matrix, [null].concat(members)))();\n}\n\nfunction transformMatrix(element) {\n  var transform = getComputedStyle(element).transform;\n\n  if (transform === 'none') {\n    return Matrix.unit();\n  }\n\n  return parseMatrix(transform);\n}\n\nexport default function elementScale(element) {\n  if (!element) {\n    return Matrix.unit();\n  }\n\n  var matrix = transformMatrix(element);\n  var parent = element.parentElement;\n\n  while (parent) {\n    var parentMatrix = transformMatrix(parent);\n    matrix = matrix.multiplyCopy(parentMatrix);\n    parent = parent.parentElement;\n  }\n\n  matrix.b = matrix.c = matrix.e = matrix.f = 0;\n  return matrix;\n}","map":null,"metadata":{},"sourceType":"module"}